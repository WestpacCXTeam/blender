/***************************************************************************************************************************************************************
 *
 * Get banner infos
 *
 **************************************************************************************************************************************************************/


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Dependencies
//--------------------------------------------------------------------------------------------------------------------------------------------------------------


((Blender) => {

	let module = {};

	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Module init method
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	module.init = () => {
		Blender.debugging( 'Banner: Initiating', 'report' );
	};


	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Get the banner text
	//
	// @return  [string]  Content with attached banner
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	module.get = () => {
		Blender.debugging( 'Banner: Generating banner', 'report' );

		return '/* GUI blend ' + Blender.banner.getBlendURL( Blender.selectedModules.brand ) + ' */' + "\n";

	};


	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Attach the banner to some content
	//
	// @param   content  [string]  Content the banner needs to be attached to
	//
	// @return  [string]  Content with attached banner
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	module.attach = ( content ) => {
		Blender.debugging( 'Banner: Attaching banner', 'report' );

		if( content.length > 0 ) {
			return Blender.banner.get() + content;
		}
		else {
			return '';
		}

	};


	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	// Get the blend url
	//
	// @param   brand  [string]  The brand for the URL
	//
	// @return  [string]  The URL string to this build
	//------------------------------------------------------------------------------------------------------------------------------------------------------------
	module.getBlendURL = ( brand ) => {
		Blender.debugging( 'Banner: Generating blend link', 'report' );

		var url = Blender.GUIRURL + brand + '/blender/#';

		Blender.selectedModules.core.forEach(( module ) => { //adding core
			url += '/' + module.ID + ':' + module.version;
		});

		Blender.selectedModules.modules.forEach(( module ) => { //adding modules
			url += '/' + module.ID + ':' + module.version;
		});

		return url;
	};


	Blender.banner = module;


})(Blender);