/***************************************************************************************************************************************************************
 *
 * Get banner infos
 *
 **************************************************************************************************************************************************************/


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Dependencies
//--------------------------------------------------------------------------------------------------------------------------------------------------------------


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Module
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Blender.banner = (() => {

	return {

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Module init method
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
		init: () => {
			Blender.debugging.report(`Banner: Initiating`);
		},


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Get the banner text
//
// @return  [string]  Content with attached banner
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
		get: () => {
			Blender.debugging.report(`Banner: Generating banner`);

			return `/* GUI blend ${Blender.banner.getBlendURL( Blender.selectedModules.brand )} */\n`;

		},


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Attach the banner to some content
//
// @param   content  [string]  Content the banner needs to be attached to
//
// @return  [string]  Content with attached banner
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
		attach: ( content ) => {
			Blender.debugging.report(`Banner: Attaching banner`);

			if( content.length > 0 ) {
				return Blender.banner.get() + content;
			}
			else {
				return ``;
			}

		},


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Get the blend url
//
// @param   brand  [string]  The brand for the URL
//
// @return  [string]  The URL string to this build
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
		getBlendURL: ( brand ) => {
			Blender.debugging.report(`Banner: Generating blend link`);

			var url = `${Blender.GUIRURL}${brand}/blender/#`;

			Blender.selectedModules.core.forEach(( module ) => { //adding core
				url += `/${module.ID}:${module.version}`;
			});

			Blender.selectedModules.modules.forEach(( module ) => { //adding modules
				url += `/${module.ID}:${module.version}`;
			});

			return url;
		},

	}

})();